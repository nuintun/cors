/**
* @module cors
* @author nuintun
* @license MIT
* @version 0.0.1
* @description A pure JavaScript CORS framework.
* @see https://nuintun.github.io/cors
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("cors-master",n):t.CORSMaster=n()}(this,function(){"use strict";function t(t,n){return o+t+r+n+s}function n(t,n){return t=a+"-Target-"+t,"function"==typeof n&&(window.navigator[t]=n),window.navigator[t]}function e(t,n){this.name=String(t),this.target=n}function i(t){this.name=String(t),this.targets={},this.listens=[],this.init()}var o="",r="",s="",a="",f=Function.prototype.toString.call(Function);f=(f=f.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")).replace(/Function|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),f=new RegExp("^"+f+"$");var c="postMessage"in window,u="attachEvent"in window,d="addEventListener"in window;return e.prototype.send=c?function(n){this.target.postMessage(t(this.name,n),"*")}:function(e){var i=n(this.name);if("function"!=typeof i)throw new Error("Target callback function is not defined");i(t(e),window)},i.prototype.init=function(){function t(t){if("object"==typeof t&&t.data&&(t=t.data),function(t,n){var e=o+t+r;return 0===n.indexOf(e)&&n.indexOf(s)===n.length-1}(e,t)){t=function(t,n){var e=o+t+r;return n.slice(e.length,-1)}(e,t);for(var n=0,a=i.length;n<a;n++)i[n](t)}}var e=this.name,i=this.listens;c?d?window.addEventListener("message",t,!1):u&&window.attachEvent("onmessage",t):n(this.name,t)},i.prototype.add=function(t,n){this.targets[t]=new e(t,n)},i.prototype.listen=function(t){this.listens.push(t)},i.prototype.clear=function(){this.listens=[]},i.prototype.send=function(t){var n=this.targets;for(var e in n)n.hasOwnProperty(e)&&n[e].send(t)},window.Messenger=i,i});
//# sourceMappingURL=master.js.map