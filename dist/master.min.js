/**
* @module cors
* @author nuintun
* @license MIT
* @version 0.0.1
* @description A pure JavaScript CORS framework.
* @see https://nuintun.github.io/cors
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("cors-master",n):t.CORSMaster=n()}(this,function(){"use strict";function t(t,n,e){return s+e+"-"+t+o+n+a}function n(t,n,e){return t=r+"-"+e+"-"+t,"function"==typeof n&&(window.navigator[t]=n),window.navigator[t]}function e(t,n,e){this.name=String(t),this.namespace=e,this.target=n}function i(t,n){this.name=String(t),this.namespace=arguments.length>1?String(n):"Messenger",this.targets={},this.listens=[],this.init()}var s="",o="",a="",r="",f="postMessage"in window,c="attachEvent"in window,d="addEventListener"in window;return e.prototype.send=f?function(n){this.target.postMessage(t(this.name,n,this.namespace),"*")}:function(e){var i=n(this.name,this.namespace);if("function"!=typeof i)throw new Error("Target callback function is not defined");i(t(e),window)},i.prototype.init=function(){function t(t){if("object"==typeof t&&t.data&&(t=t.data),function(t,n,e){var i=s+e+"-"+t+o;return 0===n.indexOf(i)&&n.indexOf(a)===n.length-1}(e,t,i)){t=function(t,n,e){var i=s+e+"-"+t+o;return n.slice(i.length,-1)}(e,t,i);for(var n=0,f=r.length;n<f;n++)r[n](t)}}var e=this.name,i=this.namespace,r=this.listens;f?d?window.addEventListener("message",t,!1):c&&window.attachEvent("onmessage",t):n(e,t,i)},i.prototype.add=function(t,n){this.targets[t]=new e(t,n,this.namespace)},i.prototype.listen=function(t){this.listens.push(t)},i.prototype.clear=function(){this.listens=[]},i.prototype.send=function(t,n){var e=this.targets;if(arguments.length>1)n=String(n),e.hasOwnProperty(n)&&e[n].send(t);else for(var i in e)e.hasOwnProperty(i)&&e[i].send(t)},window.Messenger=i,i});
//# sourceMappingURL=master.js.map