/**
* @module cors
* @author nuintun
* @license MIT
* @version 0.0.1
* @description A pure JavaScript CORS framework.
* @see https://nuintun.github.io/cors
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("cors-master",n):t.CORSMaster=n()}(this,function(){"use strict";function t(t,n){return r+t+s+n+a}function n(t,n){return t=f+"-Target-"+t,"function"==typeof n&&(window.navigator[t]=n),window.navigator[t]}function e(t){return"function"==typeof t&&c.test(t)}function i(t,n){this.name=String(t),this.target=n}function o(t){this.name=String(t),this.targets={},this.listens=[],this.init()}var r="",s="",a="",f="",c=Function.prototype.toString.call(Function);c=(c=c.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")).replace(/Function|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),c=new RegExp("^"+c+"$");var u=e(window.postMessage),d=e(window.attachEvent),p=e(window.addEventListener);return i.prototype.send=u?function(n){this.target.postMessage(t(this.name,n),"*")}:function(e){var i=n(this.name);if("function"!=typeof i)throw new Error("Target callback function is not defined");i(t(e),window)},o.prototype.init=function(){function t(t){if("object"==typeof t&&t.data&&(t=t.data),function(t,n){var e=r+t+s;return 0===n.indexOf(e)&&n.indexOf(a)===n.length-1}(e,t)){t=function(t,n){var e=r+t+s;return n.slice(e.length,-1)}(e,t);for(var n=0,o=i.length;n<o;n++)i[n](t)}}var e=this.name,i=this.listens;u?p?window.addEventListener("message",t,!1):d&&window.attachEvent("onmessage",t):n(this.name,t)},o.prototype.add=function(t,n){this.targets[t]=new i(t,n)},o.prototype.listen=function(t){this.listens.push(t)},o.prototype.clear=function(){this.listens=[]},o.prototype.send=function(t){var n=this.targets;for(var e in n)n.hasOwnProperty(e)&&n[e].send(t)},window.Messenger=o,o});
//# sourceMappingURL=master.js.map